(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{338:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(0),r=n(36),s=n.n(r),i=n(42),o=n(34),u=n(7),j=n(1),l={isAuth:localStorage.getItem("isAuth")||!1,accessToken:localStorage.getItem("accessToken")||null,user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null},d=Object(c.createContext)(),b=function(e){var t=e.children,n=Object(c.useReducer)((function(e,t){switch(t.type){case"login":return{isAuth:!0,accessToken:t.payload.accessToken,user:t.payload.user};case"logout":return localStorage.clear(),{isAuth:!1,accessToken:null,user:{}};default:return Object(j.a)({},l)}}),l),r=Object(u.a)(n,2),s=r[0],i=r[1];return Object(a.jsx)(d.Provider,{value:Object(j.a)(Object(j.a)({},s),{},{dispatch:i}),children:t})},O=d,x=n(10),h=function(e){var t=e.component,n=Object(x.a)(e,["component"]),r=Object(c.useContext)(O).isAuth;return Object(a.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return r?Object(a.jsx)(t,Object(j.a)({},e)):Object(a.jsx)(o.a,{to:{pathname:"/sign_in"}})}}))},m=function(e){var t=e.component,n=Object(x.a)(e,["component"]),r=Object(c.useContext)(O).isAuth;return Object(a.jsx)(o.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return r?Object(a.jsx)(o.a,{to:{pathname:"/"}}):Object(a.jsx)(t,Object(j.a)({},e))}}))},p=n(341),g=n(185),f=function(e){var t=e.optionParams,n=void 0===t?{}:t,a=Object(c.useContext)(O).accessToken,r=Object(g.b)("http://localhost:3030",Object(j.a)(Object(j.a)({},n),{},{cachePolicy:"no-cache",interceptors:{request:function(e){var t=e.options;return Object(j.a)(Object(j.a)({},t),{},{headers:Object(j.a)(Object(j.a)({},t.headers),{},{Authorization:"Bearer ".concat(a)})})}}}));return{get:r.get,post:r.post,patch:r.patch,delete:r.del,loading:r.loading,error:r.error,response:r.data}},y=[{title:"User",dataIndex:"user",key:"user"},{title:"Course",dataIndex:"course",key:"course"},{title:"Status",dataIndex:"status",key:"status"}],v=function(){var e=f({}),t=e.get,n=e.loading,r=e.response,s=void 0===r?{data:[]}:r;return Object(c.useEffect)((function(){t("/requests")}),[t]),Object(a.jsx)(p.a,{rowSelection:{type:"checkbox"},columns:y,dataSource:s.data.map((function(e,t){return Object(j.a)(Object(j.a)({},e),{},{key:t})})),pagination:{pageSize:1,showSizeChanger:!0},loading:n})},k=n(41),I=n.n(k),w=n(58),C=n(346),S=n(61),M=function(e){return Object(a.jsx)(S.a,Object(j.a)(Object(j.a)({type:"primary",danger:!0,icon:Object(a.jsx)(C.a,{})},e),{},{children:"Delete"}))},F=n(347),T=function(e){return Object(a.jsx)(S.a,Object(j.a)(Object(j.a)({icon:Object(a.jsx)(F.a,{}),type:"ghost",style:{backgroundColor:"#fff3cd",color:"#856404",borderColor:"#ffeeba"}},e),{},{children:"Edit"}))},N=n(348),q=function(e){var t=e.path;return Object(a.jsx)(i.b,{to:t,className:"new-category",children:Object(a.jsx)(S.a,{type:"primary",icon:Object(a.jsx)(N.a,{}),children:"New"})})},A=n(344),E=function(e){var t=Object(o.g)();return Object(a.jsx)(A.a,Object(j.a)({onBack:function(){return t.goBack()}},e))},P=n(68),_=n(69);function U(){var e=Object(P.a)(["\n  .new-category {\n    float: right;\n    margin: 16px 8px 16px;\n  }\n\n  .button-area {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    padding-right: 8px;\n\n    button {\n      margin-left: 8px;\n    }\n  }\n"]);return U=function(){return e},e}var V=_.a.div(U()),z=[{title:"Name",dataIndex:"name",key:"name"},{title:"Action",dataIndex:"action",key:"action"}],B=function(){var e=Object(o.g)(),t=f({}),n=t.get,r=t.post,s=t.loading,i=t.response,l=void 0===i?{data:[],total:0}:i,d=Object(c.useState)(1),b=Object(u.a)(d,2),O=b[0],x=b[1],h=Object(c.useState)([]),m=Object(u.a)(h,2),g=m[0],y=m[1];Object(c.useEffect)((function(){var e="limit=".concat(10*O,"&skip=").concat(10*O-10);n("/categories?".concat(e))}),[n,O]);var v=Object(c.useCallback)(Object(w.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r("/remove_categories",{selectedIds:g});case 2:y([]),x(1);case 4:case"end":return e.stop()}}),e)}))),[r,g]);return Object(a.jsxs)(V,{children:[Object(a.jsx)(E,{title:"List category",onBack:null}),Object(a.jsxs)("div",{className:"button-area",children:[Object(c.useMemo)((function(){return Object(a.jsx)(q,{path:"/admin/categories/new"})}),[]),Object(c.useMemo)((function(){return Object(a.jsx)(M,{disabled:!g.length,onClick:v})}),[v,g.length])]}),Object(c.useMemo)((function(){return Object(a.jsx)(p.a,{rowSelection:{type:"checkbox",onChange:function(e){return y(e)}},columns:z,dataSource:l.data.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{key:t._id,action:Object(a.jsx)(T,{onClick:function(){return e.push("/admin/categories/".concat(t._id,"/edit"))}})})})),pagination:{onChange:function(e){return x(e)},pageSize:10,total:l.total,current:O},loading:s})}),[e,s,O,l.data,l.total])]})},L=n(342),J=n(169),R=n(343),D=n(349);function H(){var e=Object(P.a)(["\n  form {\n    padding: 24px;\n  }\n"]);return H=function(){return e},e}var G=_.a.div(H()),K=function(){var e=Object(o.g)(),t=f({}),n=t.post,r=t.loading,s=t.response,i=void 0===s?{}:s,j=Object(c.useCallback)((function(e){n("/categories",e)}),[n]),l=L.a.useForm(),d=Object(u.a)(l,1)[0];return Object(c.useEffect)((function(){i._id&&e.replace("/admin/categories")}),[e,i]),Object(a.jsx)(J.a,{spinning:r,children:Object(a.jsxs)(G,{children:[Object(c.useMemo)((function(){return Object(a.jsx)(E,{title:"New category"})}),[]),Object(c.useMemo)((function(){return Object(a.jsxs)(L.a,{layout:"vertical",form:d,onFinish:j,children:[Object(a.jsx)(L.a.Item,{label:"Category name",name:"name",tooltip:{title:"This is a required field",icon:Object(a.jsx)(D.a,{})},rules:[{required:!0,message:"This field is required"}],children:Object(a.jsx)(R.a,{autoFocus:!0})}),Object(a.jsx)(L.a.Item,{children:Object(a.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Create"})})]})}),[d,j])]})})},Q=function(){var e=Object(o.g)(),t=Object(o.h)().categoryId,n=f({}),r=n.get,s=n.patch,i=n.loading,j=n.response,l=void 0===j?{}:j,d=Object(c.useCallback)(function(){var n=Object(w.a)(I.a.mark((function n(a){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s("/categories/".concat(t),a);case 2:n.sent._id&&e.push("/admin/categories");case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[t,e,s]),b=L.a.useForm(),O=Object(u.a)(b,1)[0];return Object(c.useEffect)((function(){(function(){var e=Object(w.a)(I.a.mark((function e(){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,r("/categories/".concat(t));case 3:n=e.sent,O.setFieldsValue({name:n.name});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,O,r]),Object(a.jsx)(J.a,{spinning:i,children:Object(a.jsxs)(G,{children:[Object(c.useMemo)((function(){return Object(a.jsx)(E,{title:"Edit category"})}),[]),Object(c.useMemo)((function(){return Object(a.jsxs)(L.a,{layout:"vertical",form:O,onFinish:d,children:[!l._id&&Object(a.jsx)("p",{children:"Category not found"}),l._id&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(L.a.Item,{label:"Category name",name:"name",tooltip:{title:"This is a required field",icon:Object(a.jsx)(D.a,{})},rules:[{required:!0,message:"This field is required"}],children:Object(a.jsx)(R.a,{autoFocus:!0})}),Object(a.jsx)(L.a.Item,{children:Object(a.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Update"})})]})]})}),[O,d,l._id])]})})},W=function(){return Object(a.jsx)("h1",{children:"Home page admin"})},X=function(){return Object(a.jsx)("h1",{children:"User page"})},Y=n(345),Z=n(97);function $(){var e=Object(P.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-color: #777;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  .ant-page-header {\n    padding-top: 0;\n  }\n\n  & > div {\n    width: 400px;\n    background-color: #fff;\n    padding: 24px;\n    border-radius: 8px;\n\n    .sign-in-title {\n      .ant-page-header-heading {\n        justify-content: center;\n      }\n    }\n\n    .ant-alert {\n      margin-bottom: 16px;\n    }\n\n    .ant-form-item:last-child {\n      margin-bottom: 0 !important;\n      text-align: center;\n    }\n  }\n"]);return $=function(){return e},e}var ee=_.a.div($()),te=function(){var e=Object(c.useContext)(O).dispatch,t=f({}),n=t.post,r=t.loading,s=L.a.useForm(),i=Object(u.a)(s,1)[0],o=Object(c.useCallback)(function(){var t=Object(w.a)(I.a.mark((function t(a){var c,r,s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/authentication",{email:a.email,password:a.password,strategy:"local"});case 2:if(!(c=t.sent).code){t.next=6;break}return i.setFieldsValue({errorMessage:c.message}),t.abrupt("return");case 6:r=c.accessToken,s=c.user,i.setFieldsValue({successMessage:"Login successfully"}),localStorage.setItem("accessToken",r),localStorage.setItem("user",JSON.stringify(s)),localStorage.setItem("isAuth",!0),setTimeout((function(){e({type:"login",payload:{user:s,accessToken:r}})}),200);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,i,n]);return Object(a.jsx)(J.a,{spinning:r,children:Object(a.jsx)(ee,{children:Object(a.jsxs)("div",{children:[Object(c.useMemo)((function(){return Object(a.jsx)(E,{className:"sign-in-title",title:"SIGN IN",onBack:null})}),[]),Object(c.useMemo)((function(){return Object(a.jsxs)(L.a,{form:i,name:"basic",layout:"vertical",initialValues:{remember:!0,errorMessage:null},onFinish:o,onChange:function(){return i.setFieldsValue({errorMessage:null})},children:[Object(a.jsx)(L.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.errorMessage!==t.errorMessage},children:function(e){var t=e.getFieldValue;return t("errorMessage")?Object(a.jsx)(Y.a,{message:t("errorMessage"),type:"error",showIcon:!0}):null}}),Object(a.jsx)(L.a.Item,{noStyle:!0,shouldUpdate:function(e,t){return e.successMessage!==t.successMessage},children:function(e){var t=e.getFieldValue;return t("successMessage")?Object(a.jsx)(Y.a,{message:t("successMessage"),type:"success",showIcon:!0}):null}}),Object(a.jsx)(L.a.Item,{label:"Email",name:"email",rules:[{required:!0,type:"email",message:"Please input your valid email!"}],children:Object(a.jsx)(R.a,{autoFocus:!0})}),Object(a.jsx)(L.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(a.jsx)(R.a.Password,{})}),Object(a.jsx)(L.a.Item,{name:"remember",valuePropName:"checked",children:Object(a.jsx)(Z.a,{children:"Remember me"})}),Object(a.jsx)(L.a.Item,{children:Object(a.jsx)(S.a,{type:"primary",htmlType:"submit",children:"Login"})})]})}),[i,o])]})})})},ne=n(340),ae=n(53),ce=n(114),re=n(186),se=n(350),ie=n(351),oe=n(352),ue=n(353),je=n(354),le=n(355),de=n(356),be=n(357),Oe=n(358),xe=n(359);function he(){var e=Object(P.a)(["\n  min-height: 100vh;\n\n  .ant-layout {\n    min-height: 100vh;\n  }\n\n  .ant-layout-sider-collapsed {\n    .logo {\n      font-size: 12px !important;\n    }\n  }\n\n  .ant-layout-header {\n    height: 60px;\n  }\n\n  .logo {\n    min-height: 32px;\n    margin: 16px;\n    color: #fff;\n    font-size: 23px;\n    text-align: center;\n  }\n\n  .site-layout .site-layout-background {\n    background: #fff;\n  }\n\n  header.site-layout-background {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    padding: 0 24px 0 0;\n  }\n\n  main.site-layout-background {\n    margin: 16px 16px;\n    /* padding: 24px; */\n  }\n"]);return he=function(){return e},e}var me=_.a.div(he()),pe=ne.a.Header,ge=ne.a.Content,fe=ne.a.Sider,ye=function(e){var t=e.children,n=Object(c.useContext)(O).dispatch,r=Object(c.useState)(!1),s=Object(u.a)(r,2),o=s[0],j=s[1];return Object(a.jsx)(me,{children:Object(a.jsxs)(ne.a,{children:[Object(a.jsxs)(fe,{collapsible:!0,collapsed:o,onCollapse:function(){j(!o)},children:[Object(a.jsx)("div",{className:"logo",children:"SALE COURSES"}),Object(a.jsxs)(ae.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[],children:[Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(se.a,{}),children:Object(a.jsx)(i.b,{to:"/admin/categories",children:"Categories"})},"category"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(ie.a,{}),children:Object(a.jsx)(i.b,{to:"/admin/requests",children:"Requests"})},"request"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(oe.a,{}),children:"Courses"},"course"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(ue.a,{}),children:"Users"},"user"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(je.a,{}),children:"Videos"},"video"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(le.a,{}),children:"Exams"},"exam"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(de.a,{}),children:"Questions"},"question"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(be.a,{}),children:"Answers"},"answer")]})]}),Object(a.jsxs)(ne.a,{className:"site-layout",children:[Object(a.jsx)(pe,{className:"site-layout-background",children:Object(a.jsx)("div",{className:"user-info",children:Object(a.jsx)(ce.a,{overlay:Object(a.jsxs)(ae.a,{children:[Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(Oe.a,{}),children:"User profile"},"user-profile"),Object(a.jsx)(ae.a.Item,{icon:Object(a.jsx)(xe.a,{}),onClick:function(){return n({type:"logout"})},children:"Logout"},"logout")]}),children:Object(a.jsx)(re.a,{size:"large",icon:Object(a.jsx)(ue.a,{})})})})}),Object(a.jsx)(ge,{className:"site-layout-background",children:t})]})]})})};var ve=function(){return Object(a.jsx)(b,{children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(o.d,{children:[Object(a.jsx)(m,{exact:!0,path:"/sign_in",component:te}),Object(a.jsxs)(ye,{children:[Object(a.jsx)(h,{exact:!0,path:"/admin",component:W}),Object(a.jsx)(h,{exact:!0,path:"/admin/requests",component:v}),Object(a.jsx)(h,{exact:!0,path:"/admin/categories",component:B}),Object(a.jsx)(h,{exact:!0,path:"/admin/categories/new",component:K}),Object(a.jsx)(h,{exact:!0,path:"/admin/categories/:categoryId/edit",component:Q}),Object(a.jsx)(h,{exact:!0,path:"/",component:X})]})]})})})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,360)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(337),n(338);s.a.render(Object(a.jsx)(ve,{}),document.getElementById("root")),ke()}},[[339,1,2]]]);
//# sourceMappingURL=main.b7272b55.chunk.js.map